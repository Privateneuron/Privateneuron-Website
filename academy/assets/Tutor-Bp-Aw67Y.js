import{j as e}from"./state-DF3Lb9FH.js";import{b as t}from"./react-BdkzLz8Q.js";import{u as N,S as v,e as f}from"./index-DNjlxgt7.js";import{L as y}from"./loader-circle-Dgb1K0IA.js";import{M as S,r as T,a as C}from"./markdown-BpzRX83k.js";const P=()=>{const{selectedExam:g}=N(),[d,b]=t.useState(""),[n,h]=t.useState(""),[i,k]=t.useState("5"),[c,j]=t.useState("mathematics"),[s,p]=t.useState(!1),[x,m]=t.useState(""),[u,r]=t.useState(""),w=async()=>{const a=d.trim();if(a.length<2){r("Please enter a topic first.");return}p(!0),r(""),m("");try{const l=await f.post("/learning/tutor",{topic:a,grade_level:Number(i),subject:c,exam_standard:g||"ncdpi",learner_note:n.trim()||void 0});m(String(l.data?.lesson||"No lesson generated."))}catch(l){const o=l?.response?.data?.detail;r(typeof o=="string"&&o?o:"Could not generate tutor lesson.")}finally{p(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100",children:"AI Tutor"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Type a topic and get a guided lesson with practice."})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-3xl p-6 sm:p-8 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsx("input",{value:i,onChange:a=>k(a.target.value),placeholder:"Grade",className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 text-slate-900 dark:text-slate-100"}),e.jsx("input",{value:c,onChange:a=>j(a.target.value),placeholder:"Subject",className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 text-slate-900 dark:text-slate-100"}),e.jsx("input",{value:d,onChange:a=>b(a.target.value),placeholder:"Topic (e.g., perimeter and area)",className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 text-slate-900 dark:text-slate-100"})]}),e.jsx("textarea",{value:n,onChange:a=>h(a.target.value),placeholder:"Optional: add what the learner is struggling with.",rows:3,className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 text-slate-900 dark:text-slate-100"}),e.jsxs("button",{type:"button",onClick:()=>{w()},disabled:s,className:"w-full sm:w-auto px-6 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-semibold disabled:opacity-60 flex items-center justify-center gap-2",children:[s?e.jsx(y,{className:"w-4 h-4 animate-spin"}):e.jsx(v,{className:"w-4 h-4"}),s?"Teaching...":"Teach Me"]}),u&&e.jsx("p",{className:"text-rose-600 text-sm font-medium",children:u})]}),x&&e.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-3xl p-6 sm:p-8",children:e.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none prose-pre:bg-slate-100 dark:prose-pre:bg-slate-800 prose-pre:border prose-pre:border-slate-200 dark:prose-pre:border-slate-700 whitespace-pre-wrap",children:e.jsx(S,{remarkPlugins:[T,C],components:{p:({children:a})=>e.jsx("p",{className:"whitespace-pre-wrap",children:a}),li:({children:a})=>e.jsx("li",{className:"whitespace-pre-wrap",children:a})},children:x})})})]})};export{P as default};
