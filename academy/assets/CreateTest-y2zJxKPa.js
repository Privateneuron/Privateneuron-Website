import{j as e}from"./state-DF3Lb9FH.js";import{u as _e,h as Ae,b as m}from"./react-BdkzLz8Q.js";import{o as ue,s as me,p as ke,a as Pe,$ as Re,b as xe,u as Ue,c as pe,d as Ie,e as Le,f as U,Z as Ge}from"./forms-KMecwXOE.js";import{c as Z,g as Me,u as ze,a as De,b as ge,d as qe,S as Te,e as ae}from"./index-BVxaXTxn.js";import{C as Be}from"./chevron-right-A0Juqcgu.js";import{L as Fe}from"./loader-circle-DYDdd2QE.js";import{B as Oe,D as $e}from"./download-CEn_f8zP.js";const We=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],He=Z("file-text",We);const Ve=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Qe=Z("layers",Ve);const Je=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ye=Z("shield-check",Je);const Ze=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ke=Z("zap",Ze);function he(l,g){try{var n=l()}catch(s){return g(s)}return n&&n.then?n.then(void 0,g):n}function Xe(l,g){for(var n={};l.length;){var s=l[0],v=s.code,u=s.message,r=s.path.join(".");if(!n[r])if("unionErrors"in s){var p=s.unionErrors[0].errors[0];n[r]={message:p.message,type:p.code}}else n[r]={message:u,type:v};if("unionErrors"in s&&s.unionErrors.forEach(function(I){return I.errors.forEach(function(y){return l.push(y)})}),g){var w=n[r].types,f=w&&w[s.code];n[r]=xe(r,g,n,v,f?[].concat(f,s.message):s.message)}l.shift()}return n}function et(l,g){for(var n={};l.length;){var s=l[0],v=s.code,u=s.message,r=s.path.join(".");if(!n[r])if(s.code==="invalid_union"&&s.errors.length>0){var p=s.errors[0][0];n[r]={message:p.message,type:p.code}}else n[r]={message:u,type:v};if(s.code==="invalid_union"&&s.errors.forEach(function(I){return I.forEach(function(y){return l.push(y)})}),g){var w=n[r].types,f=w&&w[s.code];n[r]=xe(r,g,n,v,f?[].concat(f,s.message):s.message)}l.shift()}return n}function tt(l,g,n){if(n===void 0&&(n={}),(function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def})(l))return function(s,v,u){try{return Promise.resolve(he(function(){return Promise.resolve(l[n.mode==="sync"?"parse":"parseAsync"](s,g)).then(function(r){return u.shouldUseNativeValidation&&ue({},u),{errors:{},values:n.raw?Object.assign({},s):r}})},function(r){if((function(p){return Array.isArray(p?.issues)})(r))return{values:{},errors:me(Xe(r.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw r}))}catch(r){return Promise.reject(r)}};if((function(s){return"_zod"in s&&typeof s._zod=="object"})(l))return function(s,v,u){try{return Promise.resolve(he(function(){return Promise.resolve((n.mode==="sync"?ke:Pe)(l,s,g)).then(function(r){return u.shouldUseNativeValidation&&ue({},u),{errors:{},values:n.raw?Object.assign({},s):r}})},function(r){if((function(p){return p instanceof Re})(r))return{values:{},errors:me(et(r.issues,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw r}))}catch(r){return Promise.reject(r)}};throw new Error("Invalid input: not a Zod schema")}const fe="create-test-draft-v1",st="create-test-result-v1",j="create-test-pending-generation-v1",at=[{value:"mathematics",label:"Mathematics",icon:"M",color:"from-blue-500 to-indigo-600"},{value:"english",label:"English",icon:"E",color:"from-purple-500 to-pink-600"},{value:"science",label:"Science",icon:"S",color:"from-emerald-500 to-teal-600"},{value:"social_studies",label:"Social Studies",icon:"SS",color:"from-amber-500 to-orange-600"}],nt={nceog:{gradeOptions:[3,4,5,6,7,8],subjectsByGrade:{3:["mathematics","english","science"],4:["mathematics","english","science"],5:["mathematics","english","science"],6:["mathematics","english","science"],7:["mathematics","english","science"],8:["mathematics","english","science"]},standardsBySubject:{mathematics:{default:[]},english:{default:[]},science:{default:[]}}},ncdpi:{gradeOptions:[3,4,5,6,7,8,9,10,11,12],subjectsByGrade:{3:["mathematics","english","science","social_studies"],4:["mathematics","english","science","social_studies"],5:["mathematics","english","science","social_studies"],6:["mathematics","english","science","social_studies"],7:["mathematics","english","science","social_studies"],8:["mathematics","english","science","social_studies"],9:["mathematics","english","science","social_studies"],10:["mathematics","english","science","social_studies"],11:["mathematics","english","science","social_studies"],12:["mathematics","english","science","social_studies"]},standardsBySubject:{mathematics:{3:["NC.3.OA.1 Interpret products of whole numbers (equal groups and arrays).","NC.3.OA.3 Use multiplication and division within 100 to solve word problems.","NC.3.NBT.2 Fluently add and subtract within 1000 using place value strategies.","NC.3.NF.1 Understand a fraction as a number on the number line.","NC.3.MD.8 Solve real-world perimeter and area problems."],4:["NC.4.OA.1 Interpret a multiplication equation as a comparison.","NC.4.OA.3 Solve multistep word problems using the four operations.","NC.4.NBT.4 Fluently add/subtract multi-digit whole numbers.","NC.4.NF.3 Understand fraction equivalence and compare fractions.","NC.4.MD.2 Use the four operations to solve measurement problems."],5:["NC.5.OA.2 Write, explain, and evaluate numerical expressions involving the four operations to solve up to two-step problems (parentheses and order of operations; commutative, associative, and distributive properties).","NC.5.OA.1 Use parentheses, brackets, or braces in numerical expressions, and evaluate expressions with these symbols.","NC.5.NBT.7 Add, subtract, multiply, and divide decimals to hundredths using models or strategies based on place value and properties of operations.","NC.5.NF.4 Apply and extend understanding of multiplication to multiply a fraction or whole number by a fraction.","NC.5.MD.1 Convert among different-sized standard measurement units within a given measurement system."],6:["NC.6.RP.1 Understand and use ratio concepts to solve problems.","NC.6.NS.3 Fluently add, subtract, multiply, and divide multi-digit decimals.","NC.6.EE.2 Write, read, and evaluate expressions with variables.","NC.6.G.1 Find area of triangles, quadrilaterals, and polygons.","NC.6.SP.4 Display numerical data and summarize distributions."],7:["NC.7.RP.2 Recognize and represent proportional relationships.","NC.7.NS.1 Apply operations with rational numbers.","NC.7.EE.3 Solve multi-step real-life problems with expressions and equations.","NC.7.G.6 Solve area, volume, and surface area problems.","NC.7.SP.5 Use random sampling and probability models."],8:["NC.8.NS.1 Understand and apply laws of exponents.","NC.8.EE.7 Solve linear equations in one variable.","NC.8.F.4 Construct and interpret functions in context.","NC.8.G.5 Apply the Pythagorean Theorem.","NC.8.SP.3 Analyze bivariate data and linear associations."],9:["NC.Math1.N-RN.2 Rewrite expressions involving radicals and rational exponents.","NC.Math1.A-REI.3 Solve linear equations and inequalities in one variable.","NC.Math1.F-IF.4 Interpret key features of linear and exponential functions.","NC.Math1.S-ID.6 Represent and model data on scatter plots.","NC.Math1.G-CO.5 Prove and apply geometric relationships with transformations."],10:["NC.Math2.A-SSE.1 Interpret expressions that represent quantities.","NC.Math2.A-CED.3 Represent constraints with equations and inequalities.","NC.Math2.F-BF.1 Build and compare function models.","NC.Math2.G-SRT.8 Use trigonometric ratios to solve right-triangle problems.","NC.Math2.S-CP.2 Understand independence and conditional probability."],11:["NC.Math3.A-APR.1 Perform arithmetic operations on polynomial expressions.","NC.Math3.A-REI.11 Solve systems of equations graphically and algebraically.","NC.Math3.F-TF.1 Understand radian measure and unit-circle definitions.","NC.Math3.G-GPE.1 Use coordinates to prove simple geometric theorems.","NC.Math3.S-IC.4 Use simulation to evaluate outcomes and decisions."],12:["NC.Precalculus.N-CN.1 Perform operations with complex numbers.","NC.Precalculus.F-IF.7 Analyze polynomial, rational, exponential, and trigonometric functions.","NC.Precalculus.F-TF.8 Use trigonometric identities to solve equations.","NC.Precalculus.N-VM.2 Represent and operate with vectors.","NC.Probability.S-MD.7 Compute expected values and interpret decisions."],default:["Number Sense","Algebra","Geometry","Measurement","Data Analysis & Probability"]},english:{3:["NC.3.RL.1 Ask and answer questions to demonstrate understanding of literature.","NC.3.RI.2 Determine the main idea of informational text.","NC.3.RF.4 Read with sufficient accuracy and fluency for comprehension.","NC.3.L.4 Determine meaning of unknown words using context clues.","NC.3.W.2 Write informative/explanatory texts with clear organization."],4:["NC.4.RL.2 Determine themes and summarize details in literary text.","NC.4.RI.3 Explain events, procedures, or ideas using text evidence.","NC.4.RF.4 Read grade-level text fluently with accuracy and expression.","NC.4.L.5 Demonstrate understanding of figurative language and nuances.","NC.4.W.1 Write opinion pieces with reasons and evidence."],5:["NC.5.RL.2 Determine a theme from details in literary text.","NC.5.RI.8 Explain how an author uses reasons and evidence.","NC.5.RF.4 Read and comprehend complex texts with fluency.","NC.5.L.5 Interpret figurative language and shades of meaning.","NC.5.W.2 Write informative texts to examine a topic clearly."],6:["NC.6.RL.1 Cite textual evidence to support analysis of literature.","NC.6.RI.2 Determine central idea and summarize objectively.","NC.6.L.4 Determine meaning of words/phrases in context.","NC.6.W.1 Write arguments supported with reasons and evidence.","NC.6.SL.1 Engage effectively in collaborative discussions."],7:["NC.7.RL.1 Cite several pieces of textual evidence in analysis.","NC.7.RI.6 Determine authorâ€™s point of view and purpose.","NC.7.L.5 Demonstrate understanding of figurative language.","NC.7.W.2 Write informative texts with relevant details and precision.","NC.7.SL.4 Present claims and findings with logical sequencing."],8:["NC.8.RL.2 Determine theme and analyze its development.","NC.8.RI.3 Analyze how individuals/events/ideas are introduced and developed.","NC.8.L.4 Clarify meaning of unknown words using morphology/context.","NC.8.W.1 Write arguments with valid reasoning and relevant evidence.","NC.8.SL.1 Participate effectively in collaborative discussions."],9:["NC.RL.9-10.1 Cite strong textual evidence for analysis.","NC.RI.9-10.2 Determine central idea and analyze development.","NC.L.9-10.4 Determine meaning of words/phrases in context.","NC.W.9-10.1 Write arguments supported by valid reasoning.","NC.SL.9-10.4 Present information clearly and logically."],10:["NC.RL.9-10.3 Analyze complex characters and interactions.","NC.RI.9-10.5 Analyze text structure and its effect on meaning.","NC.L.9-10.5 Analyze nuances in word meanings.","NC.W.9-10.2 Write informative texts with organization and precision.","NC.W.9-10.9 Draw evidence from texts to support analysis."],11:["NC.RL.11-12.1 Cite strong and thorough textual evidence.","NC.RI.11-12.3 Analyze complex events/ideas and interactions.","NC.L.11-12.4 Determine and clarify meaning of words and phrases.","NC.W.11-12.1 Write arguments with substantive claims and evidence.","NC.SL.11-12.3 Evaluate a speakerâ€™s reasoning and evidence."],12:["NC.RL.11-12.2 Determine and analyze themes/central ideas.","NC.RI.11-12.6 Determine an authorâ€™s point of view and rhetoric.","NC.L.11-12.5 Demonstrate understanding of figurative language nuances.","NC.W.11-12.2 Write informative/explanatory texts for complex topics.","NC.W.11-12.4 Produce clear, coherent writing for purpose and audience."],default:["Reading Literature (RL)","Reading Informational Text (RI)","Text Evidence & Inference","Vocabulary in Context","Author Craft & Structure"]},science:{3:["NC.3.P.2 Understand properties and changes of matter.","NC.3.L.1 Understand human body systems and health.","NC.3.E.1 Recognize patterns and changes in Earth systems.","NC.3.L.2 Understand ecosystems and environmental interactions.","NC.3.P.3 Understand energy transfer and sound/light behavior."],4:["NC.4.P.1 Explain force and motion relationships.","NC.4.L.1 Understand structures and functions in living organisms.","NC.4.E.1 Explain weather patterns and data-based forecasting.","NC.4.L.2 Understand food webs and ecosystem balance.","NC.4.P.2 Understand forms and transfer of energy."],5:["NC.5.P.1 Explain force, motion, and interactions.","NC.5.P.2 Understand properties of matter and changes.","NC.5.E.1 Understand weather patterns and Earth systems.","NC.5.L.2 Understand interdependence in ecosystems.","NC.5.P.3 Understand energy conservation and transfer."],6:["NC.6.P.1 Understand properties and structures of matter.","NC.6.P.2 Understand force and motion using Newtonâ€™s laws.","NC.6.E.2 Explain Earth systems and geologic change.","NC.6.L.1 Understand structures and processes of cells.","NC.6.L.2 Understand flow of energy through ecosystems."],7:["NC.7.P.1 Understand motion, forces, and interactions.","NC.7.P.2 Understand properties/changes of matter and energy.","NC.7.E.1 Understand Earth and atmospheric systems.","NC.7.L.1 Understand biological structures and functions.","NC.7.L.2 Understand reproduction, heredity, and variation."],8:["NC.8.P.1 Understand properties and changes of matter.","NC.8.P.2 Understand energy transfer and conservation.","NC.8.E.1 Understand Earth structures and processes.","NC.8.L.3 Understand ecosystems and adaptation.","NC.8.L.4 Understand evolution and genetics concepts."],9:["NC.Biology.L.1 Understand structure and function of cells.","NC.Biology.L.2 Understand molecular genetics and heredity.","NC.Biology.L.3 Understand evolution and classification.","NC.EarthEnv.E.1 Understand Earth systems and processes.","NC.Physical.P.1 Understand matter and interactions."],10:["NC.EarthEnv.E.2 Analyze energy in Earth systems and climate.","NC.Chemistry.P.1 Understand atomic structure and periodicity.","NC.Chemistry.P.2 Understand chemical bonding and reactions.","NC.Physics.P.1 Understand motion and forces.","NC.Biology.L.4 Understand ecological relationships."],11:["NC.Physics.P.2 Understand energy, work, and power.","NC.Physics.P.3 Understand waves and electromagnetic radiation.","NC.Chemistry.P.3 Understand stoichiometry and solution chemistry.","NC.Biology.L.5 Understand molecular biology and biotechnology.","NC.EarthEnv.E.3 Evaluate environmental impacts and sustainability."],12:["NC.Chemistry.P.4 Understand thermochemistry and reaction rates.","NC.Physics.P.4 Understand electricity and magnetism.","NC.Biology.L.6 Analyze modern genetics and bioethics.","NC.EarthEnv.E.4 Analyze Earth history and system evidence.","NC.Science.Inquiry.12 Apply scientific reasoning with data and models."],default:["Forces & Motion","Matter & Energy","Earth Science","Life Science","Ecosystems"]},social_studies:{3:["NC.3.H.1 Understand historical events and chronology in communities.","NC.3.G.1 Use maps and geographic tools to interpret place.","NC.3.C&G.1 Understand civic participation and citizenship roles.","NC.3.E.1 Understand basic economic concepts in communities.","NC.3.C.1 Understand cultural diversity and traditions."],4:["NC.4.H.1 Analyze major historical events in North Carolina.","NC.4.G.1 Interpret NC geography and regions.","NC.4.C&G.1 Explain rights/responsibilities in government.","NC.4.E.1 Explain production, distribution, and consumption.","NC.4.C.1 Analyze culture and identity in NC communities."],5:["NC.5.H.1 Analyze chronology of U.S. history foundations.","NC.5.G.1 Explain geographic influences on U.S. development.","NC.5.C&G.1 Understand principles of democratic government.","NC.5.E.1 Explain market economy and trade concepts.","NC.5.C.1 Analyze cultural contributions to U.S. society."],6:["NC.6.H.1 Analyze early civilizations and historical continuity.","NC.6.G.1 Apply geographic reasoning to regions/cultures.","NC.6.C&G.1 Compare forms of government and civic systems.","NC.6.E.1 Explain economic decision-making and scarcity.","NC.6.C.1 Analyze cultural diffusion and interaction."],7:["NC.7.H.1 Analyze global historical turning points.","NC.7.G.1 Evaluate human-environment interaction by region.","NC.7.C&G.1 Explain governance structures and citizen roles.","NC.7.E.1 Analyze trade, resources, and economic systems.","NC.7.C.1 Evaluate conflict/cooperation among cultures."],8:["NC.8.H.1 Analyze North Carolina and U.S. history in context.","NC.8.G.1 Interpret migration and settlement patterns.","NC.8.C&G.1 Explain constitutional principles and institutions.","NC.8.E.1 Analyze economic growth and policy decisions.","NC.8.C.1 Evaluate social change movements and impacts."],9:["NC.WorldHistory.H.1 Analyze global patterns and revolutions.","NC.Civics.C&G.1 Explain constitutional democracy principles.","NC.Civics.C&G.2 Analyze rights, liberties, and responsibilities.","NC.Economics.E.1 Analyze market structures and incentives.","NC.Geography.G.1 Evaluate spatial patterns and globalization."],10:["NC.AmericanHistory.H.1 Analyze causes/effects of U.S. conflicts.","NC.AmericanHistory.H.2 Evaluate social/political transformations.","NC.Civics.C&G.3 Analyze public policy and institutions.","NC.Economics.E.2 Interpret macroeconomic indicators and policy.","NC.Geography.G.2 Analyze population and migration trends."],11:["NC.Civics.C&G.4 Evaluate federalism and separation of powers.","NC.Civics.C&G.5 Analyze Supreme Court decisions and precedent.","NC.Economics.E.3 Evaluate fiscal/monetary policy impacts.","NC.WorldHistory.H.2 Evaluate modern global systems.","NC.SocialStudies.Inquiry.11 Use evidence-based reasoning in civic issues."],12:["NC.Civics.C&G.6 Evaluate civil discourse and democratic participation.","NC.Economics.E.4 Analyze international trade and development.","NC.AmericanHistory.H.3 Analyze continuity and change in modern U.S.","NC.Geography.G.3 Evaluate sustainability and resource policy.","NC.SocialStudies.Inquiry.12 Construct evidence-based arguments from sources."],default:["History","Geography","Civics & Government","Economics","Culture & Society"]}}},sat:{gradeOptions:[11,12],subjectsByGrade:{11:["mathematics","english"],12:["mathematics","english"]},standardsBySubject:{mathematics:{default:["Algebra","Advanced Math","Problem-Solving & Data Analysis","Geometry & Trigonometry"]},english:{default:["Information & Ideas","Craft & Structure","Expression of Ideas","Standard English Conventions"]}}},act:{gradeOptions:[10,11,12],subjectsByGrade:{10:["mathematics","english","science"],11:["mathematics","english","science"],12:["mathematics","english","science"]},standardsBySubject:{mathematics:{default:["Pre-Algebra & Elementary Algebra","Intermediate Algebra & Functions","Coordinate & Plane Geometry","Trigonometry","Statistics & Probability"]},english:{default:["Usage & Mechanics","Rhetorical Skills","Reading Comprehension","Author Purpose & Tone","Evidence Integration"]},science:{default:["Data Representation","Research Summaries","Conflicting Viewpoints","Experimental Design","Scientific Reasoning"]}}},neet:{gradeOptions:[11,12],subjectsByGrade:{11:["science"],12:["science"]},standardsBySubject:{science:{default:["Physics: Mechanics & Thermodynamics","Physics: Electrostatics & Current Electricity","Chemistry: Physical, Organic & Inorganic","Biology: Human Physiology & Cell Biology","Biology: Genetics, Evolution & Ecology"]}}},jee:{gradeOptions:[11,12],subjectsByGrade:{11:["mathematics","science"],12:["mathematics","science"]},standardsBySubject:{mathematics:{default:["Algebra","Calculus","Coordinate Geometry","Vectors & 3D Geometry","Probability & Statistics"]},science:{default:["Physics: Mechanics, E&M, Optics","Chemistry: Physical, Organic, Inorganic","Physics-Chemistry Mixed Application"]}}}},it={gradeOptions:[3,4,5,6,7,8,9,10,11,12],subjectsByGrade:{3:["mathematics","english","science","social_studies"],4:["mathematics","english","science","social_studies"],5:["mathematics","english","science","social_studies"],6:["mathematics","english","science","social_studies"],7:["mathematics","english","science","social_studies"],8:["mathematics","english","science","social_studies"],9:["mathematics","english","science","social_studies"],10:["mathematics","english","science","social_studies"],11:["mathematics","english","science","social_studies"],12:["mathematics","english","science","social_studies"]},standardsBySubject:{mathematics:{default:["Number Sense","Algebra","Geometry","Data Analysis"]},english:{default:["Comprehension","Vocabulary","Grammar","Writing Quality"]},science:{default:["Life Science","Physical Science","Earth & Space Science"]},social_studies:{default:["History","Geography","Civics","Economics"]}}},rt=l=>nt[l]||it,ot=(l,g)=>{const n=new Set(l.subjectsByGrade[Number(g)]||[]);return at.filter(s=>n.has(s.value))},lt=(l,g,n)=>{const s=l.standardsBySubject[g]||l.standardsBySubject.mathematics;return s?.[n]||s?.default||[]},ct=l=>!l||l==="nceog"?"ncdpi":l,dt=[{value:"mcq",icon:"ðŸ”˜",label:"Multiple Choice"},{value:"open_ended",icon:"âœï¸",label:"Open Response"},{value:"mixed_auto",icon:"ðŸ§ ",label:"Hybrid Auto (AI)"},{value:"mixed_manual",icon:"ðŸ§©",label:"Hybrid Manual (You)"}],ut=Ie({title:U().optional().default(""),grade_level:U(),subject:U(),standard_focus:U().optional().default(""),question_count:U(),question_type:U(),difficulty:U(),safe_mode_enabled:Le().optional().default(!1)}).superRefine((l,g)=>{const n=String(l.title||"").trim();n&&n.length<5&&g.addIssue({code:Ge.custom,path:["title"],message:"Description must be at least 5 characters."})}),Nt=()=>{const l=_e(),{examTrack:g}=Ae(),n=Me(g),{selectedExam:s,setExam:v}=ze(),[u,r]=m.useState(!1),[p,w]=m.useState(null),[f,I]=m.useState([]),[y,ne]=m.useState(!1),[q,P]=m.useState([]),[ie,K]=m.useState([]),[E,R]=m.useState(1),[S,be]=m.useState(!1),[T,H]=m.useState(!1),[re,oe]=m.useState(!1),V=m.useRef(null),C=m.useRef(null),L=m.useRef(null),{register:B,handleSubmit:ye,formState:{errors:G},control:le,setValue:N,watch:Ne}=Ue({resolver:tt(ut),defaultValues:{title:"",question_count:"10",grade_level:"5",subject:"mathematics",standard_focus:"",question_type:"mcq",difficulty:"medium",practice_mode:!1,safe_mode_enabled:!1}}),X=pe({control:le,name:"subject"}),Q=pe({control:le,name:"grade_level"}),c=Ne(),F=n||s,ve=ge(F||""),ee=ct(F),te=F||ee,O=rt(te),M=F==="nceog",ce={nceog:"NC EOG and Check-In supports grades 3-8 for Mathematics, English, and Science only.",ncdpi:"NCDPI Generic supports grades 3-12 across all core subjects.",sat:"SAT generation is limited to grades 11-12 with Math and English only.",act:"ACT generation is limited to grades 10-12 with Math, English, and Science.",neet:"NEET generation is limited to Science for grades 11-12.",jee:"JEE generation is limited to Math/Science for grades 11-12."}[te],_=O.gradeOptions,J=m.useMemo(()=>{const t=Number(Q);return _.includes(t)?String(t):String(_[0]||5)},[_,Q]),z=m.useMemo(()=>ot(O,J),[O,J]),$=Math.max(1,Number(c.question_count||10)),Ce=Math.ceil($*(c.difficulty==="hard"?2:c.difficulty==="easy"?1.2:1.5));m.useEffect(()=>{c.question_type==="mixed_manual"&&K(t=>{const a=[];for(let i=0;i<$;i+=1)a.push(t[i]||(i%2===0?"mcq":"open_ended"));return a})},[c.question_type,$]),m.useEffect(()=>{if(!n){l("/",{replace:!0});return}const t=ge(n);if(!t){l("/",{replace:!0});return}if(s!==n){const a=De(n)||void 0,i=a&&qe(a)||void 0;v(n,t.name,t.gradient,a,i)}},[n,s,v,l]),m.useEffect(()=>{_.length&&(_.includes(Number(Q))||N("grade_level",String(_[0]),{shouldValidate:!0}))},[_,Q,N]),m.useEffect(()=>{if(z.length===0)return;const t=z.some(d=>d.value===X),a=t?X:z[0].value;if(t||N("subject",a,{shouldValidate:!0}),M){I([]),N("standard_focus","",{shouldValidate:!0});return}const i=lt(O,a,J);I(i);const o=String(c.standard_focus||"").trim();o&&!i.some(d=>d.trim()===o)&&N("standard_focus","",{shouldValidate:!0})},[X,J,z,O,M,N,c.standard_focus]),m.useEffect(()=>{try{const t=sessionStorage.getItem(fe);if(t){const a=JSON.parse(t);if(a&&typeof a=="object"){if(a.form&&typeof a.form=="object"){const i=a.form;Object.keys(i).forEach(o=>N(o,i[o],{shouldValidate:!1}))}typeof a.blueprintEnabled=="boolean"&&ne(a.blueprintEnabled),Array.isArray(a.blueprintSegments)&&P(a.blueprintSegments)}}}catch{}finally{be(!0)}},[]),m.useEffect(()=>{if(!S||p||u)return;let t=!1;return(async()=>{const i=sessionStorage.getItem(j);if(!i)return;let o=null;try{o=JSON.parse(i)}catch{sessionStorage.removeItem(j);return}if(!o||typeof o!="object"||!o.payload||!o.startedAt){sessionStorage.removeItem(j);return}const d=Number(o.startedAt||0);if(!d||Date.now()-d>900*1e3){sessionStorage.removeItem(j);return}H(!0);const h=async()=>{if(!t)try{const A=await ae.get("/tests/recent?limit=25"),D=Array.isArray(A.data)?A.data:[],x=o.payload,W=D.find(b=>(b?.created_at?new Date(b.created_at).getTime():0)>=d-6e4&&String(b?.title||"")===String(x?.title||"")&&Number(b?.grade_level)===Number(x?.grade_level)&&String(b?.subject||"")===String(x?.subject||"")&&String(b?.standard_focus||"")===String(x?.standard_focus||"")&&Number(b?.question_count)===Number(x?.question_count)&&String(b?.question_type||"")===String(x?.question_type||"")&&String(b?.difficulty||"")===String(x?.difficulty||"")&&String(b?.exam_standard||"")===String(x?.exam_standard||""));W&&(sessionStorage.removeItem(j),w(W),R(3),H(!1),C.current&&(window.clearInterval(C.current),C.current=null))}catch{}};await h(),C.current=window.setInterval(()=>{h()},2500)})(),()=>{t=!0,C.current&&(window.clearInterval(C.current),C.current=null)}},[S,p,u]),m.useEffect(()=>{S&&E===3&&!p&&R(2)},[S,E,p]),m.useEffect(()=>{!S||u||T||p||R(1)},[S,u,T,p,te]),m.useEffect(()=>{if(!u)return;const t=a=>{a.preventDefault(),a.returnValue=""};return window.addEventListener("beforeunload",t),()=>window.removeEventListener("beforeunload",t)},[u]),m.useEffect(()=>{if(S)return L.current&&window.clearTimeout(L.current),L.current=window.setTimeout(()=>{try{sessionStorage.setItem(fe,JSON.stringify({form:c,blueprintEnabled:y,blueprintSegments:q}))}catch{}},250),()=>{L.current&&(window.clearTimeout(L.current),L.current=null)}},[S,E,c,y,q]);const de=m.useMemo(()=>(f||[]).slice(0,6).map(t=>({label:t,active:(c.standard_focus||"").trim()===t.trim()})),[f,c.standard_focus]),je=async t=>{const a=new AbortController;V.current=a,r(!0);try{const i=String(t.title||"").trim(),o=String(t.standard_focus||"").trim(),d=i||`Practice Assessment - ${c.subject||"General"}`,h=o||i,A=parseInt(t.question_count);let D=null;const x=t.question_type==="mixed_manual"?ie.slice(0,A):null;if(y){const Y=q.map(k=>({standard_focus:String(k.standard_focus||h||"").trim(),count:Math.max(0,Number(k.count||0)),bloom_level:String(k.bloom_level||"apply").trim().toLowerCase(),difficulty:String(k.difficulty||t.difficulty||"medium").trim().toLowerCase()})).filter(k=>k.count>0),se=Y.reduce((k,Se)=>k+Se.count,0);if(!Y.length){alert("Blueprint mode is enabled, but no blueprint segments are configured."),r(!1);return}if(se!==A){alert(`Blueprint totals must equal question count (${A}). Current total: ${se}.`),r(!1);return}D={segments:Y}}if(x){if(x.length!==A){alert("Manual hybrid plan must include one response type for each question."),r(!1);return}D={...D||{},question_type_plan:x}}const W={...t,title:d,standard_focus:h,grade_level:parseInt(t.grade_level),question_count:A,exam_standard:ee,safe_mode_enabled:!!t.safe_mode_enabled,blueprint_json:D};sessionStorage.setItem(j,JSON.stringify({startedAt:Date.now(),payload:W}));const b=await ae.post("/tests/generate",W,{signal:a.signal});w(b.data),sessionStorage.removeItem(j),R(3)}catch(i){if(console.error("Error generating test:",i),sessionStorage.removeItem(j),H(!1),i?.code==="ERR_CANCELED"||i?.name==="CanceledError")return;const d=i?.response?.data?.detail,h=typeof d=="string"&&d.trim().length>0?d:"Failed to generate test. Please check backend connection and API keys.";alert(h)}finally{V.current=null,r(!1)}},we=()=>{V.current?.abort(),V.current=null,C.current&&(window.clearInterval(C.current),C.current=null),sessionStorage.removeItem(j),H(!1),r(!1)},Ee=async()=>{if(p?.id){oe(!0);try{const t=await ae.get(`/reports/${p.id}/download`,{responseType:"blob"}),a=new Blob([t.data],{type:"application/pdf"}),i=window.URL.createObjectURL(a),o=document.createElement("a");o.href=i;const d=`Assessment_${String(p.title||"Exam").replace(/\s+/g,"_")}.pdf`;o.setAttribute("download",d),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i)}catch(t){console.error("Assessment PDF download failed:",t),alert("Could not download the assessment PDF. Please try again.")}finally{oe(!1)}}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Create Assessment"}),e.jsx("p",{className:"text-slate-400 text-sm sm:text-base",children:"Design your personalized practice assessment"})]}),e.jsx("div",{className:"flex items-center justify-center gap-3 sm:gap-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-2xl flex items-center justify-center font-black text-sm transition-all border-2 ${E>=t?"bg-indigo-600 border-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-white text-slate-400 border-slate-100 shadow-sm"}`,children:t}),t<3&&e.jsx(Be,{className:`w-5 h-5 ${E>t?"text-indigo-600":"text-slate-200"}`})]},t))}),e.jsxs("form",{onSubmit:ye(je),className:"space-y-8",children:[(u||T)&&!p&&e.jsxs("div",{className:"rounded-xl border border-indigo-200 bg-indigo-50 px-4 py-3 flex items-center justify-between gap-3",children:[e.jsx("p",{className:"text-sm text-indigo-800 font-medium",children:u?"Generation job in progress...":"Recovering your previous generation job..."}),e.jsx("button",{type:"button",onClick:we,className:"px-3 py-1.5 rounded-lg border border-indigo-300 text-indigo-700 text-xs font-semibold hover:bg-indigo-100",children:"Cancel"})]}),E===1&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Core Disciplines"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Select a primary subject area for your assessment"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[z.map(t=>e.jsxs("button",{type:"button",onClick:()=>{N("subject",t.value),R(2)},className:"p-8 rounded-[2rem] border-2 border-slate-100 bg-white hover:border-slate-200 shadow-sm dark:border-slate-700 dark:bg-slate-900 dark:hover:border-slate-600 transition-all duration-200 text-left group hover:scale-[1.02] active:scale-[0.98] flex items-center gap-6",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${t.color} flex items-center justify-center text-3xl group-hover:scale-110 transition-transform shadow-lg`,children:t.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-900 text-lg",children:t.label}),e.jsx("p",{className:"text-sm text-slate-400 font-medium",children:M?"NCEOG-Aligned Strand Practice":"Exam-aligned Practice"})]})]},t.value)),z.length===0&&e.jsx("div",{className:"sm:col-span-2 rounded-2xl border border-slate-200 bg-slate-50 px-6 py-5 text-center text-sm text-slate-600",children:"Loading valid subjects for this exam track and grade..."})]})]}),E===2&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"bg-white p-8 sm:p-12 rounded-[2.5rem] border border-slate-200 shadow-2xl shadow-slate-100/50 space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 tracking-tight flex items-center gap-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-indigo-600"}),"Configure Assessment"]}),e.jsx("p",{className:"text-slate-500 font-medium text-sm",children:"Refine the parameters for assessment generation"})]}),e.jsx("hr",{className:"border-slate-100"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-black text-slate-700 uppercase tracking-widest ml-1",children:"Exam Description (Optional)"}),e.jsx("input",{...B("title"),placeholder:"Describe what you want (e.g., fraction operations + two-step word problems)",className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-6 py-4 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 outline-none transition-all font-medium text-slate-900 placeholder-slate-400"}),G.title&&typeof G.title.message=="string"&&e.jsx("p",{className:"text-rose-600 text-xs mt-1 font-bold ml-1",children:G.title.message})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-black text-slate-700 uppercase tracking-widest ml-1",children:"Grade Level"}),e.jsx("select",{...B("grade_level"),className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-6 py-4 outline-none font-medium text-slate-900 focus:ring-4 focus:ring-indigo-50 transition-all cursor-pointer appearance-none",children:_.map(t=>e.jsx("option",{value:t,children:M?`NC Grade ${t}`:`Grade ${t}`},t))}),ce&&e.jsx("p",{className:"text-xs text-slate-500 ml-1",children:ce})]}),!M&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-black text-slate-700 uppercase tracking-widest ml-1",children:"Focus Standard (Optional)"}),e.jsxs("select",{...B("standard_focus"),className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-6 py-4 outline-none font-medium text-slate-900 focus:ring-4 focus:ring-indigo-50 transition-all cursor-pointer appearance-none",children:[e.jsx("option",{value:"",children:"No specific standard (optional)"}),f.map((t,a)=>e.jsx("option",{value:t,children:t},a))]}),G.standard_focus&&typeof G.standard_focus.message=="string"&&e.jsx("p",{className:"text-rose-600 text-xs mt-1 font-bold ml-1",children:G.standard_focus.message}),e.jsx("p",{className:"text-xs text-slate-500 ml-1",children:"You can provide description only, standard only, or both."})]})]}),!M&&e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 space-y-3",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-600",children:"Standard Coverage Preview"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[de.map(t=>e.jsx("div",{className:`text-xs rounded-lg px-3 py-2 border ${t.active?"border-indigo-200 bg-indigo-50 text-indigo-700 font-semibold":"border-slate-200 bg-slate-50 text-slate-600"}`,children:t.label},t.label)),de.length===0&&e.jsx("div",{className:"text-xs text-slate-500",children:"No standards available for this selection."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-black text-slate-700 uppercase tracking-widest ml-1",children:"Total Questions"}),e.jsx("input",{type:"number",...B("question_count"),min:"5",max:"50",className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-6 py-4 outline-none font-medium text-slate-900 focus:ring-4 focus:ring-indigo-50 transition-all"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-black text-slate-700 uppercase tracking-widest ml-1",children:"Academic Rigor"}),e.jsxs("select",{...B("difficulty"),className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-6 py-4 outline-none font-medium text-slate-900 focus:ring-4 focus:ring-indigo-50 transition-all cursor-pointer appearance-none",children:[e.jsx("option",{value:"easy",children:"Foundational (Level 1-2)"}),e.jsx("option",{value:"medium",children:"On-grade (Level 3-4)"}),e.jsx("option",{value:"hard",children:"Rigorous (Level 5)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-5 bg-slate-50 border border-slate-100 rounded-2xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(Ye,{className:"w-4 h-4 text-emerald-600"}),e.jsx("p",{className:"font-black text-sm",children:"Reduce Test Diversity Mode"})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Conservative item phrasing and stable structure for classroom-safe assessments."}),e.jsx("button",{type:"button",onClick:()=>N("safe_mode_enabled",!c.safe_mode_enabled),className:`w-12 h-6 rounded-full relative transition-colors ${c.safe_mode_enabled?"bg-emerald-500":"bg-slate-300"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${c.safe_mode_enabled?"right-1":"left-1"}`})})]}),e.jsxs("div",{className:"p-5 bg-slate-50 border border-slate-100 rounded-2xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(Qe,{className:"w-4 h-4 text-indigo-600"}),e.jsx("p",{className:"font-black text-sm",children:"Blueprint Mode"})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Distribute item counts by strand/standard with optional bloom-level hints."}),e.jsx("button",{type:"button",onClick:()=>{const t=!y;ne(t),t&&q.length===0&&P([{standard_focus:c.standard_focus||f[0]||"",count:Number(c.question_count||10),bloom_level:"apply",difficulty:c.difficulty||"medium"}])},className:`w-12 h-6 rounded-full relative transition-colors ${y?"bg-indigo-600":"bg-slate-300"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${y?"right-1":"left-1"}`})})]})]}),y&&e.jsxs("div",{className:"space-y-3 border border-indigo-100 rounded-2xl p-4 bg-indigo-50/40",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-indigo-700",children:"Blueprint Segments"}),e.jsx("button",{type:"button",onClick:()=>P(t=>[...t,{standard_focus:c.standard_focus||f[0]||"",count:1,bloom_level:"apply",difficulty:c.difficulty||"medium"}]),className:"text-xs px-2 py-1 rounded-md border border-indigo-200 text-indigo-700 hover:bg-indigo-100",children:"Add Segment"})]}),q.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[e.jsxs("select",{value:t.standard_focus,onChange:i=>P(o=>o.map((d,h)=>h===a?{...d,standard_focus:i.target.value}:d)),className:"md:col-span-2 bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"No specific standard"}),f.map((i,o)=>e.jsx("option",{value:i,children:i},`${a}-${o}`))]}),e.jsx("input",{type:"number",min:1,value:t.count,onChange:i=>P(o=>o.map((d,h)=>h===a?{...d,count:Number(i.target.value||0)}:d)),className:"bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:t.bloom_level,onChange:i=>P(o=>o.map((d,h)=>h===a?{...d,bloom_level:i.target.value}:d)),className:"flex-1 bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"remember",children:"remember"}),e.jsx("option",{value:"understand",children:"understand"}),e.jsx("option",{value:"apply",children:"apply"}),e.jsx("option",{value:"analyze",children:"analyze"}),e.jsx("option",{value:"evaluate",children:"evaluate"}),e.jsx("option",{value:"create",children:"create"})]}),e.jsx("button",{type:"button",onClick:()=>P(i=>i.filter((o,d)=>d!==a)),className:"px-2 rounded-xl border border-rose-200 text-rose-600 hover:bg-rose-50",children:"X"})]})]},a))]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-2xl p-5 space-y-2",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Learner Experience Preview"}),e.jsxs("p",{className:"text-sm font-semibold text-slate-700",children:["Estimated duration: ",e.jsxs("span",{className:"text-indigo-600",children:[Ce," minutes"]})," - ",$," questions"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"The app will provide concept-level explanations, misconception feedback, and a next-session learning plan after submission."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pt-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-black text-slate-700 uppercase tracking-widest ml-1",children:"Response Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:dt.map(t=>e.jsxs("button",{type:"button",onClick:()=>N("question_type",t.value),className:`p-5 rounded-2xl border-2 transition-all flex flex-col items-center gap-2 group ${c.question_type===t.value?"border-indigo-600 bg-white shadow-lg":"border-slate-50 bg-slate-50 hover:border-slate-100 text-slate-500"}`,children:[e.jsx("div",{className:`text-2xl transition-transform group-hover:scale-110 ${c.question_type===t.value?"":"grayscale opacity-50"}`,children:t.icon}),e.jsx("p",{className:`font-black text-[10px] uppercase tracking-widest text-center ${c.question_type===t.value?"text-indigo-600":"text-slate-400"}`,children:t.label})]},t.value))}),c.question_type==="mixed_manual"&&e.jsxs("div",{className:"space-y-3 border border-indigo-100 rounded-2xl p-4 bg-indigo-50/40",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-indigo-700",children:"Hybrid Manual Plan (choose each question type)"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-56 overflow-auto pr-1",children:Array.from({length:$}).map((t,a)=>{const i=ie[a]||(a%2===0?"mcq":"open_ended");return e.jsxs("div",{className:"flex items-center justify-between bg-white border border-indigo-100 rounded-xl px-3 py-2",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Q",a+1]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>K(o=>{const d=[...o];return d[a]="mcq",d}),className:`px-2 py-1 rounded-md text-[10px] font-black uppercase tracking-wider ${i==="mcq"?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:"MCQ"}),e.jsx("button",{type:"button",onClick:()=>K(o=>{const d=[...o];return d[a]="open_ended",d}),className:`px-2 py-1 rounded-md text-[10px] font-black uppercase tracking-wider ${i==="open_ended"?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:"Open"})]})]},a)})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-black text-slate-700 uppercase tracking-widest ml-1",children:"Assessment Mode"}),e.jsxs("div",{onClick:()=>N("practice_mode",!c.practice_mode),className:`p-5 rounded-2xl border-2 transition-all cursor-pointer flex items-center justify-between group ${c.practice_mode?"border-emerald-500 bg-white shadow-lg shadow-emerald-50":"border-slate-50 bg-slate-50 hover:border-slate-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:`text-2xl transition-all ${c.practice_mode?"":"grayscale opacity-50"}`,children:c.practice_mode?"ðŸ§˜":"ðŸ“"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-900 text-sm tracking-tight",children:c.practice_mode?"Learning Practice":"Standardized Exam"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter",children:c.practice_mode?"Instant feedback and scaffolds":"Exam-style end-of-test feedback"})]})]}),e.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${c.practice_mode?"bg-emerald-500":"bg-slate-300"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all shadow-sm ${c.practice_mode?"right-1":"left-1"}`})})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>R(1),className:"order-2 sm:order-1 flex-1 py-4.5 px-8 rounded-2xl bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all font-black text-lg py-4 shadow-sm",children:"Back to Subject"}),e.jsxs("button",{type:"submit",disabled:u||T,className:"order-1 sm:order-2 flex-[2] bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-black py-4.5 px-10 rounded-2xl flex items-center justify-center gap-3 transition-all hover:scale-[1.02] active:scale-95 shadow-2xl shadow-indigo-100 text-lg py-4",children:[u?e.jsx(Fe,{className:"w-6 h-6 animate-spin"}):e.jsx(Te,{className:"w-6 h-6"}),u?"Building Assessment...":T?"Recovering Job...":"Generate Assessment"]})]})]}),E===3&&p&&e.jsxs("div",{className:"text-center space-y-6 animate-in fade-in zoom-in duration-500",children:[e.jsx("div",{className:"w-24 h-24 mx-auto rounded-3xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-2xl shadow-emerald-500/30",children:e.jsx(He,{className:"w-12 h-12 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:p.title}),e.jsxs("p",{className:"text-slate-400",children:[p.question_count," ",ve?.name||"Exam"," questions generated successfully."]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs("button",{type:"button",onClick:()=>l(`/take/${p.id}`,{state:{practiceMode:!!c.practice_mode,examTrack:F||ee}}),className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-indigo-500/25 hover:scale-105 transition-transform",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Start Assessment"]}),e.jsxs("button",{type:"button",onClick:()=>{Ee()},disabled:re,className:"px-6 py-4 bg-white border border-slate-200 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-slate-50 transition-all shadow-sm",children:[e.jsx($e,{className:"w-5 h-5"}),re?"Downloading PDF...":"Download PDF"]})]}),e.jsx("button",{type:"button",onClick:()=>{w(null),R(1),sessionStorage.removeItem(st),sessionStorage.removeItem(j)},className:"text-slate-400 hover:text-white text-sm transition-colors",children:"Create Another Assessment"})]})]})]})};export{Nt as default};
