import{j as e}from"./state-DF3Lb9FH.js";import{h as Te,u as Ce,c as Me,b as r}from"./react-BdkzLz8Q.js";import{r as D,a as be}from"./katex.min-BmzFcbEa.js";import{C as Qe}from"./circle-check-CzfuaNF9.js";import{C as Ae,L as R}from"./lightbulb-D2gKJIt-.js";import{B as Le,C as xe}from"./circle-alert-CElnEV51.js";import{M as G,r as Re,a as qe}from"./markdown-CmISyzGm.js";import{c as v,e as L}from"./index-BsCeRERa.js";import{C as Ee}from"./chevron-right-CyprC5Wq.js";const Ie=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Fe=v("bookmark",Ie);const He=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pe=v("chevron-left",He);const Oe=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Be=v("flag",Oe);const Ue=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ze=v("rotate-ccw",Ue);const De=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ge=v("send",De);const We=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Ke=v("timer",We),S=({content:o,className:c})=>{const i=(x=>{if(!x)return"";let l=x;return l=l.replace(/([^\$]|^)(\\frac\{.+?\}\{.+?\})/g,"$1$$$2$$"),l=l.replace(/([^\$]|^)(\\sqrt\{.+?\})/g,"$1$$$2$$"),l=l.replace(/([^\$]|^)(\\(?:pi|theta|alpha|beta|gamma|delta|sigma))(\b|[^\$])/g,"$1$$$2$$$3"),l})(o);return e.jsx("div",{className:c,children:e.jsx(G,{remarkPlugins:[be],rehypePlugins:[[D,{strict:!1,throwOnError:!1,output:"html"}]],components:{p:({node:x,...l})=>e.jsx("p",{className:"mb-2 last:mb-0",...l})},children:i})})},Ye=({question:o,userAnswer:c,isCorrect:m,showHint:i=!1,onTryAgain:x,onShowHint:l})=>e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:`
                p-4 rounded-xl border-2 flex items-start gap-3
                ${m?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}
            `,children:[m?e.jsx(Qe,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5"}):e.jsx(Ae,{className:"w-6 h-6 text-orange-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-bold text-base mb-1 ${m?"text-green-900":"text-orange-900"}`,children:m?"Excellent! You've got this concept.":"Not quite - let's understand why."}),e.jsx("p",{className:`text-sm ${m?"text-green-700":"text-orange-700"}`,children:m?"Your practice is paying off! Keep building mastery.":"This is a common challenge. Here's the key insight..."})]})]}),o.explanation_correct&&e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Le,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-bold text-blue-900 mb-2",children:["Why ",o.correct_answer," is correct:"]}),e.jsx(S,{content:o.explanation_correct,className:"text-sm text-blue-800 prose prose-sm max-w-none"})]})]})}),!m&&o.explanation_wrong&&o.explanation_wrong[c]&&e.jsx("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(xe,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-bold text-orange-900 mb-2",children:["Why ",c," is not correct:"]}),e.jsx(S,{content:o.explanation_wrong[c],className:"text-sm text-orange-800 prose prose-sm max-w-none"})]})]})}),!m&&o.common_misconceptions&&o.common_misconceptions.length>0&&e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4",children:[e.jsxs("h5",{className:"font-bold text-yellow-900 mb-2 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5"}),"Common Mistakes to Avoid:"]}),e.jsx("ul",{className:"space-y-1 text-sm text-yellow-800",children:o.common_misconceptions.map((w,a)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-600 mt-0.5",children:"â€¢"}),e.jsx(S,{content:w})]},a))})]}),o.worked_example&&e.jsxs("div",{className:"bg-slate-50 border-2 border-slate-200 rounded-xl p-4",children:[e.jsx("h5",{className:"font-bold text-slate-900 mb-2",children:"Step-by-Step Solution:"}),e.jsx("div",{className:"text-sm text-slate-800 font-mono bg-white p-3 rounded border border-slate-200 overflow-x-auto",children:e.jsx(S,{content:o.worked_example})})]}),i&&o.hint&&e.jsx("div",{className:"bg-indigo-50 border-2 border-indigo-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(R,{className:"w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-indigo-900 mb-2",children:"Hint:"}),e.jsx(S,{content:o.hint,className:"text-sm text-indigo-800 prose prose-sm max-w-none"})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[!m&&x&&e.jsx("button",{onClick:x,className:"px-4 py-2 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition-colors",children:"Try Again"}),!i&&o.hint&&l&&e.jsxs("button",{onClick:l,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg font-semibold hover:bg-indigo-200 transition-colors flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Show Hint"]})]})]}),ue=o=>{if(!o)return"";let c=o.replace(/\\\\/g,"\\");return c=c.replace(/(^|[^\$])(\\frac\{.+?\}\{.+?\})/g,"$1$$$2$$"),c=c.replace(/(^|[^\$])(\\sqrt\{.+?\})/g,"$1$$$2$$"),c=c.replace(/(^|[^\$])(\\(?:pi|theta|alpha|beta|gamma|delta|sigma))(\b|[^\$])/g,"$1$$$2$$$3"),c},he=[Re,qe,be],Je=r.memo(function({questionsLength:c,answers:m,markedForReview:i,currentQuestionIndex:x,onGoToQuestion:l}){return e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-10 gap-2",children:Array.from({length:c}).map((w,a)=>{const g=(m[a]||"").trim().length>0,b=i.has(a),y=a===x;let h="border-slate-200 bg-white text-slate-600";return g&&(h="border-emerald-200 bg-emerald-50 text-emerald-700"),b&&(h="border-amber-200 bg-amber-50 text-amber-700"),y&&(h="border-indigo-600 bg-indigo-600 text-white"),e.jsx("button",{type:"button",onClick:()=>l(a),className:`h-10 rounded-xl border font-black text-sm transition-all hover:scale-[1.03] ${h}`,children:a+1},a)})})}),Ve=r.memo(function({options:c,userAnswer:m,isAnswered:i,practiceMode:x,isCorrect:l,onAnswerChange:w}){return e.jsx("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(c||{}).map(([a,g])=>e.jsxs("button",{onClick:()=>w(a),disabled:i&&x,className:`flex items-start gap-5 p-6 rounded-2xl border-2 transition-all text-left group ${m===a?x?l?"border-emerald-500 bg-emerald-50 dark:border-emerald-400 dark:bg-emerald-900/30":"border-rose-500 bg-rose-50 dark:border-rose-400 dark:bg-rose-900/30":"border-indigo-600 bg-indigo-50 shadow-md dark:border-indigo-400 dark:bg-indigo-900/35":"border-slate-50 bg-slate-50 hover:border-slate-200 hover:bg-white dark:border-slate-700 dark:bg-slate-800 dark:hover:border-slate-600 dark:hover:bg-slate-800/80"}`,children:[e.jsx("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center font-black flex-shrink-0 transition-transform group-hover:scale-105 ${m===a?"bg-indigo-600 text-white":"bg-white text-slate-400 border border-slate-200 shadow-sm"}`,children:a}),e.jsx("span",{className:`flex-1 font-bold text-lg leading-snug pt-1 ${m===a?"text-slate-900 dark:text-slate-100":"text-slate-600 dark:text-slate-200"}`,children:g})]},a))})}),lt=()=>{const{testId:o}=Te(),c=Ce(),m=Me(),i=m.state?.practiceMode||!1,x=m.state?.examTrack||null,[l,w]=r.useState(null),[a,g]=r.useState(0),[b,y]=r.useState({}),[h,W]=r.useState(new Set),[ge,pe]=r.useState(!0),[K,Y]=r.useState(!1),[j,q]=r.useState(900),[f,E]=r.useState(new Set),[k,_]=r.useState(!1),[I,J]=r.useState({}),[F,H]=r.useState(new Set),[fe,we]=r.useState(new Map),[V,X]=r.useState(!1),[T,C]=r.useState(""),[Z,ee]=r.useState(""),[te,P]=r.useState(""),[O,se]=r.useState(!1),[ae,M]=r.useState(""),B=r.useRef(Date.now()),[re,je]=r.useState(!1),ne=r.useRef(!1),N=r.useRef(null),p=r.useMemo(()=>o?`take-test-progress-v1-${o}`:"",[o]),Ne=[{value:"unclear_wording",label:"Unclear wording"},{value:"wrong_answer",label:"Wrong answer"},{value:"too_hard",label:"Too hard"},{value:"off_topic",label:"Off topic"}];r.useEffect(()=>{if(p)try{const t=sessionStorage.getItem(p);if(!t)return;const s=JSON.parse(t);s&&typeof s=="object"&&(s.answers&&typeof s.answers=="object"&&y(s.answers),Number.isInteger(s.currentQuestionIndex)&&Number(s.currentQuestionIndex)>=0&&g(Number(s.currentQuestionIndex)),Array.isArray(s.markedForReview)&&W(new Set(s.markedForReview.map(n=>Number(n)).filter(n=>Number.isInteger(n)&&n>=0))),Array.isArray(s.showHintsByQuestion)&&E(new Set(s.showHintsByQuestion.map(n=>Number(n)).filter(n=>Number.isInteger(n)&&n>=0))),s.questionTimes&&typeof s.questionTimes=="object"&&J(s.questionTimes),Array.isArray(s.hintsUsed)&&H(new Set(s.hintsUsed.map(n=>Number(n)).filter(n=>Number.isInteger(n)&&n>=0))),Number.isFinite(s.timeLeft)&&Number(s.timeLeft)>0&&(q(Number(s.timeLeft)),ne.current=!0))}catch{sessionStorage.removeItem(p)}finally{je(!0)}},[p]),r.useEffect(()=>{(async()=>{try{const s=await L.get(`/tests/${o}`);w(s.data);const n=90,$=s.data?.questions?.length||s.data?.question_count||10;ne.current||q($*n)}catch(s){console.error("Failed to fetch test",s)}finally{pe(!1)}})()},[o]),r.useEffect(()=>{if(j<=0||i)return;const t=setInterval(()=>{q(s=>s-1)},1e3);return()=>clearInterval(t)},[j,i]),r.useEffect(()=>{if(!(!re||!p))return N.current&&window.clearTimeout(N.current),N.current=window.setTimeout(()=>{try{sessionStorage.setItem(p,JSON.stringify({answers:b,currentQuestionIndex:a,markedForReview:Array.from(h),showHintsByQuestion:Array.from(f),questionTimes:I,hintsUsed:Array.from(F),timeLeft:j,updatedAt:Date.now()}))}catch{}},250),()=>{N.current&&(window.clearTimeout(N.current),N.current=null)}},[re,p,b,a,h,f,I,F,j]);const u=l?.questions||[],d=u[a],U=r.useMemo(()=>{const t=String(l?.standard_focus||"").trim();if(t)return t;const s=String(d?.learning_objective||"").trim();return s||String(l?.subject||"Current topic").trim()},[l?.standard_focus,l?.subject,d?.learning_objective]);r.useEffect(()=>{u.length&&a>u.length-1&&g(Math.max(0,u.length-1))},[u.length,a]),r.useEffect(()=>{i&&(T.trim()||C(U))},[i,T,U]);const oe=r.useMemo(()=>Object.values(b).filter(t=>typeof t=="string"&&t.trim().length>0).length,[b]),z=Math.max(0,u.length-oe),le=r.useCallback(t=>{const s=d?.question_type==="mcq"||!!d?.options;k&&i&&s||(y(n=>({...n,[a]:t})),i&&t.trim().length>0&&_(!0))},[d,a,k,i]),ie=t=>{const s=Math.round((Date.now()-B.current)/1e3);J(n=>({...n,[t]:(n[t]||0)+s})),B.current=Date.now()},ve=async t=>{if(X(!1),!!d?.id)try{await L.post(`/tests/${o}/questions/${d.id}/flag`,{reason:t}),we(s=>new Map(s).set(a,t))}catch{}},ye=()=>{W(t=>{const s=new Set(t);return s.has(a)?s.delete(a):s.add(a),s})},de=()=>{y(t=>{const s={...t};return delete s[a],s}),_(!1)},ke=()=>{ie(a),g(t=>Math.min(t+1,u.length-1)),_(!1)},$e=r.useCallback(t=>{ie(a),g(t),_(!1)},[a]),Se=async()=>{if(u.length===0||z>0&&!window.confirm(`You still have ${z} unanswered question(s) and ${h.size} marked for review. Submit anyway?`))return;Y(!0);const t={...I},s=Math.round((Date.now()-B.current)/1e3);t[a]=(t[a]||0)+s;try{const n=await L.post(`/tests/${o}/submit`,b);p&&sessionStorage.removeItem(p),c(`/results/${o}`,{state:{answers:b,ai_feedback:n.data.ai_feedback,submission:n.data,practiceMode:i,examTrack:x,questionTimes:t,hintsUsed:Array.from(F)}})}catch(n){console.error("Submission failed",n)}finally{Y(!1)}},ce=async t=>{const s=String(t||T).trim();if(s.length<2){M("Enter a topic for the tutor.");return}se(!0),M(""),P("");try{const n=await L.post("/learning/tutor",{topic:s,grade_level:Number(l?.grade_level)||void 0,subject:String(l?.subject||"").toLowerCase()||void 0,exam_standard:String(x||l?.exam_standard||"").toLowerCase()||void 0,learner_note:Z.trim()||void 0});P(String(n.data?.lesson||"No tutor content returned."))}catch(n){const $=n?.response?.data?.detail;M(typeof $=="string"&&$.trim()?$:"Tutor request failed.")}finally{se(!1)}};if(ge)return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})});if(!l)return e.jsx("div",{children:"Test not found"});if(!d)return e.jsx("div",{children:"Question not found"});const _e=a===u.length-1,Q=d.question_type==="mcq"||!!d.options,A=b[a]||"",me=Q&&A===d.correct_answer;return e.jsx("div",{className:`${i?"max-w-7xl":"max-w-5xl"} mx-auto py-4`,children:e.jsxs("div",{className:i?"grid grid-cols-1 xl:grid-cols-[minmax(0,1fr)_360px] gap-6":"",children:[e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom duration-400",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:l.title}),i&&e.jsx("span",{className:"px-2 py-0.5 bg-emerald-50 text-emerald-600 border border-emerald-100 rounded text-[10px] font-black uppercase tracking-widest",children:"Practice Mode"})]}),e.jsxs("p",{className:"text-slate-500 font-medium",children:["Question ",a+1," of ",u.length]})]}),!i&&e.jsxs("div",{className:"flex items-center gap-3 bg-white px-4 py-2 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsx(Ke,{className:"w-5 h-5 text-indigo-600"}),e.jsxs("span",{className:"text-lg font-black font-mono text-slate-900 tracking-tighter",children:[Math.floor(j/60),":",(j%60).toString().padStart(2,"0")]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("p",{className:"font-bold text-slate-900",children:"Question Palette"}),e.jsxs("div",{className:"text-xs font-semibold text-slate-500",children:["Answered: ",e.jsx("span",{className:"text-emerald-600",children:oe})," | Remaining: ",e.jsx("span",{className:"text-rose-600",children:z})," | Review: ",e.jsx("span",{className:"text-amber-600",children:h.size})]})]}),e.jsx(Je,{questionsLength:u.length,answers:b,markedForReview:h,currentQuestionIndex:a,onGoToQuestion:$e})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-700 ease-out shadow-sm",style:{width:`${(a+1)/u.length*100}%`}})}),e.jsxs("div",{className:"bg-white p-8 sm:p-12 rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-100/50 space-y-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-indigo-600/10"}),e.jsxs("div",{className:"absolute top-6 right-6 flex items-center gap-2",children:[e.jsx("button",{onClick:ye,className:`p-3 rounded-2xl border transition-all ${h.has(a)?"bg-amber-50 text-amber-700 border-amber-200":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"}`,title:"Mark for review",children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>X(!V),className:`p-3 rounded-2xl border transition-all ${fe.has(a)?"bg-rose-50 text-rose-600 border-rose-200":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"}`,title:"Flag this question",children:e.jsx(Be,{className:"w-5 h-5"})}),V&&e.jsxs("div",{className:"absolute right-0 top-12 z-50 bg-white border border-slate-200 rounded-2xl shadow-xl p-2 min-w-[180px]",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-3 py-1",children:"Why flag?"}),Ne.map(t=>e.jsx("button",{onClick:()=>ve(t.value),className:"w-full text-left px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 rounded-xl transition-colors",children:t.label},t.value))]})]}),e.jsx("button",{onClick:()=>{const t=new Set(f);t.has(a)?t.delete(a):(t.add(a),H(s=>new Set(s).add(a))),E(t)},className:`p-3 rounded-2xl transition-all border ${f.has(a)?"bg-amber-100 text-amber-700 border-amber-300 shadow-md":"bg-amber-50 text-amber-600 hover:bg-amber-100 border-amber-100 shadow-sm"}`,title:"Get a hint",children:e.jsx(R,{className:"w-5 h-5"})}),e.jsx("button",{onClick:de,className:"p-3 rounded-2xl bg-slate-50 text-slate-600 hover:bg-slate-100 transition-all border border-slate-100 shadow-sm",title:"Clear answer",children:e.jsx(ze,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"pr-24 text-2xl sm:text-3xl font-bold text-slate-900 leading-[1.3] tracking-tight",children:e.jsx(G,{remarkPlugins:he,rehypePlugins:[[D,{strict:!1,throwOnError:!1,output:"html"}]],components:{p:({children:t})=>e.jsx("p",{className:"whitespace-pre-wrap m-0",children:t})},children:ue(String(d.question_text||""))})}),f.has(a)&&d.hint&&e.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-5 rounded-2xl animate-in fade-in zoom-in duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(R,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-xs font-black text-amber-700 uppercase",children:"Hint"})]}),e.jsx("p",{className:"text-sm text-slate-700 font-medium italic leading-relaxed",children:d.hint})]}),Q?e.jsx(Ve,{options:d.options||{},userAnswer:A,isAnswered:k,practiceMode:i,isCorrect:!!me,onAnswerChange:le}):e.jsx("textarea",{value:A,onChange:t=>le(t.target.value),placeholder:"Type your detailed response here...",className:"w-full bg-slate-50 border-2 border-slate-100 rounded-3xl p-8 h-48 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 transition-all font-medium text-lg text-slate-900 placeholder-slate-400"}),i&&k&&Q&&e.jsx(Ye,{question:d,userAnswer:A,isCorrect:me,showHint:f.has(a),onShowHint:()=>{const t=new Set(f);t.add(a),E(t),H(s=>new Set(s).add(a))},onTryAgain:de}),i&&k&&!Q&&e.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl p-6 space-y-3",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-indigo-700",children:"Model Guidance"}),e.jsx("p",{className:"text-slate-700 text-sm leading-relaxed",children:d.correct_answer||"Review the standard and provide a complete evidence-based response."}),d.explanation_correct&&e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:d.explanation_correct})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 py-4",children:[e.jsxs("button",{onClick:()=>g(t=>Math.max(t-1,0)),disabled:a===0,className:"w-full sm:w-auto px-8 py-4 rounded-2xl bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 disabled:opacity-30 font-bold flex items-center justify-center gap-2 transition-all",children:[e.jsx(Pe,{className:"w-5 h-5"})," Previous"]}),_e?e.jsxs("button",{onClick:Se,disabled:K,className:"w-full sm:w-auto px-10 py-4 rounded-2xl bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50 font-black shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 transition-all hover:scale-[1.02] active:scale-95 text-lg",children:[K?"Submitting Responses...":"Finish Assessment",e.jsx(Ge,{className:"w-5 h-5"})]}):e.jsxs("button",{onClick:ke,className:"w-full sm:w-auto px-12 py-4 rounded-2xl bg-indigo-600 text-white hover:bg-indigo-700 font-black shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 transition-all hover:scale-[1.02] active:scale-95 text-lg",children:["Next Question ",e.jsx(Ee,{className:"w-5 h-5"})]})]})]}),i&&e.jsxs("aside",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-5 space-y-4 h-fit xl:sticky xl:top-20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-700",children:"Practice Tutor"}),e.jsx("button",{type:"button",onClick:()=>{C(U),ee(""),P(""),M("")},className:"text-xs text-slate-500 hover:text-slate-700",children:"Reset"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Topic"}),e.jsx("input",{value:T,onChange:t=>C(t.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900",placeholder:"Ask about this skill..."}),e.jsx("button",{type:"button",onClick:()=>C(String(d?.question_text||"").trim()),className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold",children:"Use current question text"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500",children:"What are you stuck on? (optional)"}),e.jsx("textarea",{value:Z,onChange:t=>ee(t.target.value),rows:3,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900",placeholder:"Example: I confuse perimeter and area."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{ce()},disabled:O,className:"flex-1 px-3 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold disabled:opacity-60",children:O?"Teaching...":"Teach Topic"}),e.jsx("button",{type:"button",onClick:()=>{ce(String(d?.question_text||"").trim())},disabled:O,className:"flex-1 px-3 py-2 rounded-xl bg-slate-900 hover:bg-black text-white text-sm font-bold disabled:opacity-60",children:"Explain Q"})]}),ae&&e.jsx("p",{className:"text-xs text-rose-600 font-medium",children:ae}),te&&e.jsx("div",{className:"max-h-[60vh] overflow-auto border border-slate-200 rounded-xl p-3 bg-slate-50",children:e.jsx("div",{className:"prose prose-sm max-w-none whitespace-pre-wrap",children:e.jsx(G,{remarkPlugins:he,rehypePlugins:[[D,{strict:!1,throwOnError:!1,output:"html"}]],components:{p:({children:t})=>e.jsx("p",{className:"whitespace-pre-wrap",children:t}),li:({children:t})=>e.jsx("li",{className:"whitespace-pre-wrap",children:t})},children:ue(te)})})})]})]})})};export{lt as default};
